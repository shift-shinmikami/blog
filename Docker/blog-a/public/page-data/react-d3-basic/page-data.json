{"componentChunkName":"component---src-templates-blog-post-index-js","path":"/react-d3-basic/","webpackCompilationHash":"b51ea938389645a9bdf2","result":{"data":{"site":{"siteMetadata":{"title":"Shin-tech25's blog","author":"Shin-tech25","siteUrl":"https://Shin-tech25.netlify.app"}},"markdownRemark":{"id":"d32844bd-e725-5fe5-a653-68121175b48a","excerpt":"D3.js について D3.js(Data-Driven Documents)はデータを基盤として、文書を操作するための JavaScript ライブラリーです。これを利用すると、あるデータを DOM…","html":"<h1 id=\"d3js-について\">D3.js について</h1>\n<p>D3.js(Data-Driven Documents)はデータを基盤として、文書を操作するための JavaScript ライブラリーです。これを利用すると、あるデータを DOM にバインディングした後、チャートやグラフとしてビジュアライズすることが可能です。</p>\n<ul>\n<li>協力なデータ可視化ライブラリー</li>\n<li>WEB 標準に準拠</li>\n<li>HTML、SVG、CSS を操作できる</li>\n<li>メソッドチェーンを利用</li>\n<li>Firefox・Chrome・Safari・IE9 以上・Android・iOS に対応</li>\n</ul>\n<h1 id=\"react-について\">React について</h1>\n<p>React は、Facebook 社が開発した Web サイト上の UI パーツを構築するための JavaScript ライブラリです。</p>\n<p>以下のような特徴があります。</p>\n<ul>\n<li>宣言的な View（Declarative）</li>\n<li>コンポーネントベース（Component-Based）</li>\n<li>一度学習すれば、どこでも使える（Learn Once, Write Anywhere）</li>\n</ul>\n<h1 id=\"なぜ-d3-と-react-を組み合わせるのか\">なぜ D3 と React を組み合わせるのか</h1>\n<p>コンポーネント指向の React と SVG によるデータ可視化の D3 を組み合わせるとメリットがあります。D3 だけだとコード量が膨大になりがちで、可読性が悪く、再利用性もあまりありません。</p>\n<p>React によって、D3 のコードをコンポーネント化し、データ読み込みを変数化することで可読性、再利用性を向上させることが出来ます。</p>\n<p>この点が D3 と React を組み合わせるメリットです。</p>\n<h1 id=\"victory-のデータを-csv-で読み込む\">Victory のデータを CSV で読み込む</h1>\n<p>D3.js と React.js を組み合わせたデータ可視化については様々な文献がある一方、難易度が高く理解し難いのが現状です。\nYoutube で分かりやすいビデオを見つけることが出来ましたため共有したいと思います。</p>\n<p>\n          <div\n            class=\"gatsby-resp-iframe-wrapper\"\n            style=\"padding-bottom: 50%; position: relative; height: 0; overflow: hidden;margin-bottom: 1.0725rem\"\n          >\n            <div><iframe src=\"https://www.youtube.com/embed/OacqgtI30pk\" style=\"\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n          \"></iframe></div>\n          </div>\n          </p>\n<p>詳細は動画で説明されているため割愛させていただくことにして、エッセンスだけ抜き出して説明します。</p>\n<p>元々の index.js のファイルは以下のようです。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VictoryBar<span class=\"token punctuation\">,</span> VictoryChart <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"Victory\"</span>\n\n<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span> quarter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"a\"</span><span class=\"token punctuation\">,</span> earnings<span class=\"token punctuation\">:</span> <span class=\"token number\">13000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> quarter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span> earnings<span class=\"token punctuation\">:</span> <span class=\"token number\">16500</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> quarter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"c\"</span><span class=\"token punctuation\">,</span> earnings<span class=\"token punctuation\">:</span> <span class=\"token number\">14250</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span> quarter<span class=\"token punctuation\">:</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">,</span> earnigns<span class=\"token punctuation\">:</span> <span class=\"token number\">19000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>VictoryChart\n    style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> tickLabels<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> fontSize<span class=\"token punctuation\">:</span> <span class=\"token number\">120</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    width<span class=\"token operator\">=</span><span class=\"token string\">\"960\"</span>\n    height<span class=\"token operator\">=</span><span class=\"token string\">\"500\"</span>\n    domainPadding<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">50</span><span class=\"token punctuation\">}</span>\n    padding<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> top<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>VictoryBar data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span> x<span class=\"token operator\">=</span><span class=\"token string\">\"quarter\"</span> y<span class=\"token operator\">=</span><span class=\"token string\">\"earnings\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>VictoryChart<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span></code></pre></div>\n<p>CSV からデータを読み取るようにした場合は以下のようになります。</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>csv<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'d3'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> VictoryBar<span class=\"token punctuation\">,</span> VictoryChart <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'Victory'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">row</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">d</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  d<span class=\"token punctuation\">.</span>population <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>d<span class=\"token punctuation\">.</span>population<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> d<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function\">App</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>data<span class=\"token punctuation\">,</span> setData<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">=></span><span class=\"token punctuation\">{</span>\n    <span class=\"token function\">csv</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data.csv'</span><span class=\"token punctuation\">,</span> row<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span>setData<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>VictoryChart\n      style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>tickLabels<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>fontSize<span class=\"token punctuation\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      width<span class=\"token operator\">=</span><span class=\"token string\">'960'</span>\n      height<span class=\"token operator\">=</span><span class=\"token string\">'500'</span>\n      domainPadding<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">50</span><span class=\"token punctuation\">}</span>\n      padding<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span> left<span class=\"token punctuation\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span> right<span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>VictoryBar data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span> x<span class=\"token operator\">=</span><span class=\"token string\">\"country\"</span> y<span class=\"token operator\">=</span><span class=\"token string\">\"population\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>VictoryChart<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">const</span> rootElement <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> rootElement<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ポイントとしては</p>\n<ul>\n<li>d3 のライブラリ読み込み</li>\n<li>csv の raw データを setData()で渡す</li>\n<li>データを渡す場合には第２引数が空配列の初回実行 useEffect を用いる</li>\n<li>データパース関数も別で用意して、d3.csv()の第２引数に渡す。</li>\n</ul>\n<p>上の４点かなと思います。</p>\n<p>D3.js と React.js の組み合わせはデータビジュアライゼーションに置いて非常にポテンシャルが高いと感じておりますので今後も継続して勉強していく予定です。</p>\n<p>また何か考えたことや分かったことあったらアップしていきます。</p>","tableOfContents":"<ul>\n<li><a href=\"/react-d3-basic/#d3js-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\">D3.js について</a></li>\n<li><a href=\"/react-d3-basic/#react-%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\">React について</a></li>\n<li><a href=\"/react-d3-basic/#%E3%81%AA%E3%81%9C-d3-%E3%81%A8-react-%E3%82%92%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B%E3%81%AE%E3%81%8B\">なぜ D3 と React を組み合わせるのか</a></li>\n<li><a href=\"/react-d3-basic/#victory-%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%92-csv-%E3%81%A7%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80\">Victory のデータを CSV で読み込む</a></li>\n</ul>","fields":{"slug":"/react-d3-basic"},"frontmatter":{"title":"D3.js x React.js 基礎","date":"2022-07-17","description":"D3(Data Driven Document)とReactを組み合わせたデータ可視化方法の基礎","tags":["React","D3"],"slug":"react-d3-basic"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/react-d3-basic","relatedPosts":[{"title":"React Hooks 基礎","slug":"react-hooks-basic","date":"2022-07-17","score":50}],"latestPosts":[{"title":"Gatsbyで内部リンクをSPA的に使う方法","slug":"gatsby-internal-link","date":"2022-07-24"},{"title":"Google検索のオプションなど","slug":"google-search","date":"2022-07-24"},{"title":"ハッキングにおける偵察技術","slug":"hacking-reconnaissance","date":"2022-07-24"},{"title":"ハッキングにおける情報収集の手法","slug":"hacking-gathering-information","date":"2022-07-24"},{"title":"ハッキングの手順と攻撃種類","slug":"hacking-phase-and-strategy","date":"2022-07-24"}],"previous":{"fields":{"slug":"/react-hooks-basic"},"frontmatter":{"title":"React Hooks 基礎","date":"2022-07-17","tags":["React"],"slug":"react-hooks-basic","keywords":"React,React Hooks,State, Props, useEffect, useMemo, useRef"}},"next":{"fields":{"slug":"/cloud-native-computing-basic"},"frontmatter":{"title":"クラウドネイティブとは何か","date":"2022-07-19","tags":["クラウドネイティブ"],"slug":"cloud-native-computing-basic","keywords":"クラウド, クラウドネイテイブ, CNCF"}}}}}